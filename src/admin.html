<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body style="overflow: hidden;">
<div id="content"></div>
<script src="../lib/module.js"></script>
<script src="../lib/targetruntime.js"></script>
<script src="../lib/runtimemock.js"></script>
<script src="../lib/svghandler.js"></script>
<script src="../lib/svggui.js"></script>
<!--<script src="../lib/scenario.js"></script>-->
<script>
    let targetRuntime = require("../lib/targetruntime").targetRuntime;
    let SVG = require("../lib/svghandler").SVG;
    svg = SVG(targetRuntime());
</script>
<script src="Util.js"></script>
<script src="Domain.js"></script>
<script src="GUI.js"></script>
<script src="main.js"></script>
<script>
    SVGGlobalHandler();
    Domain();
    SVGUtil();
    Bdd();
    AdminGUI();
    setGlobalVariable();
</script>
<script>
    var formationsManager;
    var param = {speed: 5, step: 100};
    var thing = function (data) {
        var myFormations=JSON.parse(data).myCollection;
        console.log(myFormations);
        formationsManager = new FormationsManager(myFormations);
        formationsManager.display();
    };
    var result1 = httpGetAsync("/getAllFormationsNames", thing);

    function resizePaper(){
        drawing.dimension(document.body.clientWidth,document.documentElement.clientHeight);//attr("preserveAspectRatio", "xMinYMin meet") ;
        drawings.glass.dimension(drawing.width,drawing.height).position(drawing.width/2,drawing.height/2);
        var formation = formationsManager.formationDisplayed;

        switch(drawing.currentPageDisplayed){
            case "FormationsManager":
                mainManipulator.flush();
                drawing.manipulator.ordonator.set(2, drawings.piste.first);
                formationsManager.clippingManipulator.last.remove(formationsManager.panel.component);
                formationsManager.header.display();
                formationsManager.display();
                break;
            case "Formation":
                formation.gamesLibraryManipulator.flush();
                formation.clippingManipulator.last.remove(formation.panel.component);
                formation.library.libraryManipulator.last.remove(formation.library.arrowModeManipulator.first);
                formationsManager.header.display();
                formation.displayFormation();
                break;
            case "QuizManager":
                formation.library.libraryManipulator.flush();
                formation.quizzManager.library.libraryManipulator.flush();
                //formation.quizzManager.redim();
                //formationsManager.header.redim();
                formation.quizzManager.loadQuizz(formation.quizzDisplayed);
                formation.quizzManager.resizing = true;
                formation.quizzManager.display();
                break;
            case "QuizPreview":
                formation.quizzManager.manipulator.flush();
                formation.quizzManager.displayEditedQuestion();

                break;
        }


        /** for( var i = 0;i<qManip.ordonator.children.length;i++) {
            qManip.ordonator.unset(i);
        }
         if(quizz.currentQuestionIndex<quizz.tabQuestions.length-1){//-1?
            quizz.tabQuestions[quizz.currentQuestionIndex].display(0, quizz.headerHeight/2 + quizz.questionHeight/2+MARGIN,
                quizz.questionArea.w , quizz.questionHeight);
            quizz.tabQuestions[quizz.currentQuestionIndex].displayAnswers(0, quizz.headerHeight + MARGIN+quizz.questionHeight,
                quizz.questionArea.w , quizz.answerHeight);
        }else{
            quizz.resultManipulator.last.remove(quizz.puzzle.puzzleManipulator.first);
            quizz.resultManipulator.last.remove(quizz.scoreManipulator.first);
            quizz.displayResult();
        }**/

    }

    setTimeout(function(){
        window.onresize = resizePaper;
    },200);

</script>
</body>

</html>